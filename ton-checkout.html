<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ TON</title>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f4f9fc;
        color: #333;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      .payment-container {
        background: #fff;
        padding: 30px 40px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        text-align: center;
        width: 360px;
      }

      .amount {
        font-size: 1.2em;
        margin-bottom: 20px;
      }

      .ton-button {
        background-color: #0098ea;
        color: white;
        border: none;
        padding: 14px 28px;
        font-size: 1em;
        border-radius: 8px;
        cursor: pointer;
        margin: 10px 0;
        transition: background-color 0.3s ease;
      }

      .ton-button:hover {
        background-color: #007ac2;
      }

      .wallet-info {
        margin-top: 20px;
        text-align: left;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="payment-container">
      <h1>üí≥ –û–ø–ª–∞—Ç–∏—Ç–∏ –æ–Ω–ª–∞–π–Ω –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h1>
      <p class="amount">–°—É–º–∞ –¥–æ —Å–ø–ª–∞—Ç–∏: <strong>‚Ç¥100.00</strong></p>

      <div id="connect-button" class="ton-button">–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å</div>

      <div id="wallet-info" class="wallet-info hidden">
        <p>üîó –ê–¥—Ä–µ—Å–∞: <span id="wallet-address"></span></p>
        <p>üí∞ TON: <span id="ton-balance">‚Äî</span></p>
        <p>üíµ USDT: <span id="usdt-balance">‚Äî</span></p>
      </div>

      <button id="pay-button" class="ton-button hidden">–û–ø–ª–∞—Ç–∏—Ç–∏</button>
    </div>

    <script>
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TonConnect
      const tonConnect = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl:
          "https://fxckfxck.github.io/sitetest2/tonconnect-manifest.json",
        buttonRootId: "connect-button",
      });

      const walletInfo = document.getElementById("wallet-info");
      const walletAddress = document.getElementById("wallet-address");
      const tonBalance = document.getElementById("ton-balance");
      const usdtBalance = document.getElementById("usdt-balance");
      const payButton = document.getElementById("pay-button");

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ—à–µ–ª—å–∫–µ
      async function updateWalletInfo() {
        const wallet = await tonConnect.wallet;
        if (wallet) {
          walletInfo.classList.remove("hidden");
          payButton.classList.remove("hidden");
          walletAddress.textContent = wallet.account.address;

          // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ TON –∏ USDT
          // –ù–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ API –∏–ª–∏ SDK
          tonBalance.textContent = "‚Äî"; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
          usdtBalance.textContent = "‚Äî"; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        }
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
      tonConnect.onStatusChange(() => {
        updateWalletInfo();
      });

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã
      payButton.addEventListener("click", async () => {
        const transaction = {
          validUntil: Math.floor(Date.now() / 1000) + 60,
          messages: [
            {
              address: "UQDPFf6Y-HI_n0l5JhlKaA3McTgmx0LeeYhb4KC1pQUnE1cc",
              amount: "10000000", // –°—É–º–º–∞ –≤ –Ω–∞–Ω–æ—Ç–æ–Ω–∞—Ö (0.01 TON)
            },
          ],
        };

        try {
          await tonConnect.sendTransaction(transaction);
          alert("‚úÖ –û–ø–ª–∞—Ç–∞ —É—Å–ø—ñ—à–Ω–∞!");
        } catch (error) {
          console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ:", error);
          alert("‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.");
        }
      });
    </script>
  </body>
</html>
